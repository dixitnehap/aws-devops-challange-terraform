# aws-devops-challange-terraform

This project contains source code and supporting files for a serverless application that you can deploy with the Github Actions Workflows. It includes the following files and folders.

devops-http-api - Code for the application's Lambda function. Lambda is written in Node.js. The function will return response from Get and Post HTTP method.

devops-http-api/tests - Unit tests for the application code.

main.tf - The main file that contains the instrucitons to create and configure AWS resources using Terraform.

variable.tf - main.tf file reads variables from this file.

output.tf - Here we define the varialbes that needs to be print in logs after aws resource creation.

.github/workflows/terraform.yml - main file to trigger the Github workflow. 

Note: Currently this application will create resource depending on AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY.

## Deploy AWS resources via GitHub Workflow Action (CI pipeline)
Go to the "Actions" tab on "aws-devops-challange-terraform" GitHub repository.
On left workflows panel, select "Terraform Apply" GitHub Workflow.
Click on "Run workflow" by selecting main branch from the popup dialog.
The workflow will start executing the required steps to deploy the AWS Lambda function and Api Gatewy resources on AWS.
On successful execution of GitHub Workflow, Go to "Terraform Apply" stage and check the output.
You should see similar output like below example. Fetch the 'api_url' from the value to test the API

Outputs:

api_url = "https://008f3bpkh3.execute-api.eu-central-1.amazonaws.com/serverless_lambda_stage"
function_name = "devops-http-api"

**Example Test Case**:
```
curl --header "Content-Type: application/json" --data '{"username":"xyz","password":"xyz"}' https://0pccivschc.execute-api.eu-central-1.amazonaws.com/api
```
Please note the URL in above example request should be replaced with the API URL generated by GitHub workflow.

**Example API Response**:
AWS Lamda Function Response
Welcome to our demo API, here are the details of your request:

Headers: Content-Type: application/json
Method: POST
Body: { "username": "xyz", "password": "xyz" }

NOTE: API response body type is text/html to display message as requested in challenge. This can be change to Json based on requirement.